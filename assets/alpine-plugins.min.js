// Persist plugin
(()=>{function d(t){let n=()=>{let r,a;try{a=localStorage}catch(i){console.error(i),console.warn("Alpine: $persist is using temporary storage since localStorage is unavailable.");let e=new Map;a={getItem:e.get.bind(e),setItem:e.set.bind(e)}}return t.interceptor((i,e,l,s,f)=>{let o=r||`_x_${s}`,u=g(o,a)?p(o,a):i;return l(u),t.effect(()=>{let c=e();m(o,c,a),l(c)}),u},i=>{i.as=e=>(r=e,i),i.using=e=>(a=e,i)})};Object.defineProperty(t,"$persist",{get:()=>n()}),t.magic("persist",n),t.persist=(r,{get:a,set:i},e=localStorage)=>{let l=g(r,e)?p(r,e):a();i(l),t.effect(()=>{let s=a();m(r,s,e),i(s)})}}function g(t,n){return n.getItem(t)!==null}function p(t,n){let r=n.getItem(t,n);if(r!==void 0)return JSON.parse(r)}function m(t,n,r){r.setItem(t,JSON.stringify(n))}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(d)});})();

// Mask plugin
(()=>{function v(n){n.directive("mask",(e,{value:t,expression:u},{effect:s,evaluateLater:a,cleanup:l})=>{let r=()=>u,o="";queueMicrotask(()=>{if(["function","dynamic"].includes(t)){let i=a(u);s(()=>{r=p=>{let d;return n.dontAutoEvaluateFunctions(()=>{i(c=>{d=typeof c=="function"?c(p):c},{scope:{$input:p,$money:x.bind({el:e})}})}),d},f(e,!1)})}else f(e,!1);e._x_model&&e._x_model.set(e.value)});let g=new AbortController;l(()=>{g.abort()}),e.addEventListener("input",()=>f(e),{signal:g.signal,capture:!0}),e.addEventListener("blur",()=>f(e,!1),{signal:g.signal});function f(i,p=!0){let d=i.value,c=r(d);if(!c||c==="false")return!1;if(o.length-i.value.length===1)return o=i.value;let b=()=>{o=i.value=h(d,c)};p?w(i,c,()=>{b()}):b()}function h(i,p){if(i==="")return"";let d=k(p,i);return m(p,d)}}).before("model")}function w(n,e,t){let u=n.selectionStart,s=n.value;t();let a=s.slice(0,u),l=m(e,k(e,a)).length;n.setSelectionRange(l,l)}function k(n,e){let t=e,u="",s={9:/[0-9]/,a:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},a="";for(let l=0;l<n.length;l++){if(["9","a","*"].includes(n[l])){a+=n[l];continue}for(let r=0;r<t.length;r++)if(t[r]===n[l]){t=t.slice(0,r)+t.slice(r+1);break}}for(let l=0;l<a.length;l++){let r=!1;for(let o=0;o<t.length;o++)if(s[a[l]].test(t[o])){u+=t[o],t=t.slice(0,o)+t.slice(o+1),r=!0;break}if(!r)break}return u}function m(n,e){let t=Array.from(e),u="";for(let s=0;s<n.length;s++){if(!["9","a","*"].includes(n[s])){u+=n[s];continue}if(t.length===0)break;u+=t.shift()}return u}function x(n,e=".",t,u=2){if(n==="-")return"-";if(/^\D+$/.test(n))return"9";t==null&&(t=e===","?".":",");let s=(o,g)=>{let f="",h=0;for(let i=o.length-1;i>=0;i--)o[i]!==g&&(h===3?(f=o[i]+g+f,h=0):f=o[i]+f,h++);return f},a=n.startsWith("-")?"-":"",l=n.replaceAll(new RegExp(`[^0-9\\${e}]`,"g"),""),r=Array.from({length:l.split(e)[0].length}).fill("9").join("");return r=`${a}${s(r,t)}`,u>0&&n.includes(e)&&(r+=`${e}`+"9".repeat(u)),queueMicrotask(()=>{this.el.value.endsWith(e)||this.el.value[this.el.selectionStart-1]===e&&this.el.setSelectionRange(this.el.selectionStart-1,this.el.selectionStart-1)}),r}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(v)});})();

// Resize plugin
(()=>{function u(e){e.directive("resize",e.skipDuringClone((t,{value:i,expression:n,modifiers:o},{evaluateLater:r,cleanup:h})=>{let f=r(n),s=(z,m)=>{f(()=>{},{scope:{$width:z,$height:m}})},v=o.includes("document")?b(s):a(t,s);h(()=>v())}))}function a(e,t){let i=new ResizeObserver(n=>{let[o,r]=c(n);t(o,r)});return i.observe(e),()=>i.disconnect()}var d,l=new Set;function b(e){return l.add(e),d||(d=new ResizeObserver(t=>{let[i,n]=c(t);l.forEach(o=>o(i,n))}),d.observe(document.documentElement)),()=>{l.delete(e)}}function c(e){let t,i;for(let n of e)t=n.borderBoxSize[0].inlineSize,i=n.borderBoxSize[0].blockSize;return[t,i]}document.addEventListener("alpine:init",()=>{window.Alpine.plugin(u)});})();
